<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–≤–æ—è –∏–≥—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #044A36; /* Pine - –±–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π */
            min-height: 100vh;
            padding: 20px;
            color: #0A1001; /* Rich Black */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .panel {
            background: #F2F3F4; /* Anti-Flash White */
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #044A36; /* Pine */
            font-weight: bold;
        }

        .editor-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .editor-table td {
            padding: 10px;
            border: 1px solid #7C908B; /* Stone */
            vertical-align: top;
        }

        .editor-header {
            background: #1E5634; /* Basil - –±–æ–ª–µ–µ –º—è–≥–∫–∏–π —Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π */
            color: #F2F3F4; /* Anti-Flash White */
            text-align: center;
            font-weight: bold;
            padding: 15px;
        }

        .topic-cell {
            background: #2F6E45; /* Forest - –º—è–≥–∫–∏–π –∑–µ–ª–µ–Ω—ã–π */
            color: #F2F3F4; /* Anti-Flash White */
            text-align: center;
            font-weight: bold;
            width: 150px;
        }

        .topic-input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.9);
            color: #044A36; /* Pine */
        }

        .question-input, .answer-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #7C908B; /* Stone */
            border-radius: 4px;
            margin-bottom: 5px;
            background: white;
            color: #0A1001; /* Rich Black */
        }

        .question-input {
            height: 60px;
            resize: vertical;
        }

        .points-input {
            width: 80px;
            padding: 5px;
            border: 1px solid #7C908B; /* Stone */
            border-radius: 4px;
            text-align: center;
            background: white;
            color: #0A1001; /* Rich Black */
            font-weight: bold;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: #2F6E45; /* Forest */
            color: white;
        }

        .btn-primary:hover {
            background: #4FAF5C; /* Frog - –±–æ–ª–µ–µ –º—è–≥–∫–∏–π –∑–µ–ª–µ–Ω—ã–π */
        }

        .btn-danger {
            background: #044A36; /* Pine */
            color: white;
        }

        .btn-danger:hover {
            background: #1E5634; /* Basil */
        }

        .btn-secondary {
            background: #7C908B; /* Stone */
            color: white;
        }

        .btn-secondary:hover {
            background: #A5D6B0; /* Pistachio */
            color: #0A1001;
        }

        .btn-dark {
            background: #1E5634; /* Basil */
            color: white;
        }

        .btn-dark:hover {
            background: #2F6E45; /* Forest */
        }

        .game-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 8px;
            margin: 20px 0;
        }

        .category-header {
            background: #1E5634; /* Basil */
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: bold;
            border-radius: 8px;
            min-width: 150px;
            font-size: 18px;
        }

        .question-cell {
            background: #2F6E45; /* Forest */
            color: #F2F3F4; /* –ë–µ–ª—ã–π –≤–º–µ—Å—Ç–æ –∂–µ–ª—Ç–æ–≥–æ */
            padding: 30px 15px;
            text-align: center;
            font-weight: bold;
            font-size: 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .question-cell:hover {
            background: #4FAF5C; /* Frog */
            color: #044A36; /* Pine */
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .question-cell.used {
            background: #7C908B; /* Stone */
            color: #A5D6B0; /* Pistachio */
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .timer {
            font-size: 24px;
            font-weight: bold;
            background: #044A36; /* Pine */
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            min-width: 80px;
            text-align: center;
        }

        .score-board {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .team-score {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 150px;
            border: 2px solid #7C908B; /* Stone */
        }

        .team-score input {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            border: 2px solid #A5D6B0; /* Pistachio */
            border-radius: 5px;
            width: 100%;
            padding: 10px;
            color: #044A36; /* Pine */
            background: #F2F3F4; /* Anti-Flash White */
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(4, 74, 54, 0.95); /* Pine —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é */
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #F2F3F4; /* Anti-Flash White */
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            color: #0A1001; /* Rich Black */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .question-display {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
            color: #044A36; /* Pine */
            font-weight: bold;
            line-height: 1.4;
        }

        .answer-display {
            font-size: 20px;
            color: #1E5634; /* Basil */
            margin-bottom: 20px;
            text-align: center;
            display: none;
            font-weight: bold;
            padding: 15px;
            background: #A5D6B0; /* Pistachio */
            border-radius: 6px;
            border-left: 4px solid #4FAF5C; /* Frog */
        }

        .points-badge {
            background: #4FAF5C; /* Frog */
            color: #044A36; /* Pine */
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 18px;
            margin-left: 10px;
            font-weight: bold;
        }

        .save-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2F6E45; /* Forest */
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            display: none;
            z-index: 1001;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 768px) {
            .game-table {
                border-spacing: 4px;
            }
            
            .question-cell {
                padding: 15px 8px;
                font-size: 18px;
            }
            
            .category-header {
                padding: 12px 8px;
                font-size: 14px;
            }
            
            .btn-group {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .score-board {
                flex-direction: column;
            }
            
            .game-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="save-notification" id="saveNotification">‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!</div>

    <div class="container">
        <!-- –†–µ–¥–∞–∫—Ç–æ—Ä -->
        <div class="panel" id="editorPanel">
            <h2>üéÆ –°–≤–æ—è –∏–≥—Ä–∞ - –†–µ–¥–∞–∫—Ç–æ—Ä</h2>
            <table class="editor-table">
                <tr>
                    <td class="editor-header">–¢–µ–º—ã / –ë–∞–ª–ª—ã</td>
                    <td class="editor-header">
                        <input type="number" class="points-input" id="points0" value="100" min="1">
                    </td>
                    <td class="editor-header">
                        <input type="number" class="points-input" id="points1" value="200" min="1">
                    </td>
                    <td class="editor-header">
                        <input type="number" class="points-input" id="points2" value="300" min="1">
                    </td>
                    <td class="editor-header">
                        <input type="number" class="points-input" id="points3" value="400" min="1">
                    </td>
                    <td class="editor-header">
                        <input type="number" class="points-input" id="points4" value="500" min="1">
                    </td>
                </tr>
                
                <!-- –¢–µ–º–∞ 1 -->
                <tr>
                    <td class="topic-cell">
                        <input type="text" class="topic-input" id="topic0" value="–ò—Å—Ç–æ—Ä–∏—è">
                    </td>
                    <td>
                        <textarea class="question-input" id="q0_0">–ö–∞–∫–æ–π –≥–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω–∏—è –†—É—Å–∏?</textarea>
                        <input type="text" class="answer-input" id="a0_0" value="882 –≥–æ–¥">
                    </td>
                    <td>
                        <textarea class="question-input" id="q0_1">–ü–µ—Ä–≤—ã–π —Ä—É—Å—Å–∫–∏–π —Ü–∞—Ä—å?</textarea>
                        <input type="text" class="answer-input" id="a0_1" value="–ò–≤–∞–Ω –ì—Ä–æ–∑–Ω—ã–π">
                    </td>
                    <td>
                        <textarea class="question-input" id="q0_2">–ì–æ–¥ –ö—É–ª–∏–∫–æ–≤—Å–∫–æ–π –±–∏—Ç–≤—ã?</textarea>
                        <input type="text" class="answer-input" id="a0_2" value="1380 –≥–æ–¥">
                    </td>
                    <td>
                        <textarea class="question-input" id="q0_3">–ü–µ—Ä–≤—ã–π –∏–º–ø–µ—Ä–∞—Ç–æ—Ä –†–æ—Å—Å–∏–∏?</textarea>
                        <input type="text" class="answer-input" id="a0_3" value="–ü—ë—Ç—Ä I">
                    </td>
                    <td>
                        <textarea class="question-input" id="q0_4">–ì–æ–¥ –æ—Ç–º–µ–Ω—ã –∫—Ä–µ–ø–æ—Å—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∞?</textarea>
                        <input type="text" class="answer-input" id="a0_4" value="1861 –≥–æ–¥">
                    </td>
                </tr>
                
                <!-- –¢–µ–º–∞ 2 -->
                <tr>
                    <td class="topic-cell">
                        <input type="text" class="topic-input" id="topic1" value="–ù–∞—É–∫–∞">
                    </td>
                    <td>
                        <textarea class="question-input" id="q1_0">–°–∫–æ–ª—å–∫–æ –ø–ª–∞–Ω–µ—Ç –≤ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ?</textarea>
                        <input type="text" class="answer-input" id="a1_0" value="8">
                    </td>
                    <td>
                        <textarea class="question-input" id="q1_1">–°–∞–º—ã–π –±–æ–ª—å—à–æ–π –æ—Ä–≥–∞–Ω —á–µ–ª–æ–≤–µ–∫–∞?</textarea>
                        <input type="text" class="answer-input" id="a1_1" value="–ö–æ–∂–∞">
                    </td>
                    <td>
                        <textarea class="question-input" id="q1_2">–°–∞–º–∞—è –±–æ–ª—å—à–∞—è –∫–æ—Å—Ç—å –≤ —Ç–µ–ª–µ?</textarea>
                        <input type="text" class="answer-input" id="a1_2" value="–ë–µ–¥—Ä–µ–Ω–Ω–∞—è">
                    </td>
                    <td>
                        <textarea class="question-input" id="q1_3">–ö—Ç–æ –æ—Ç–∫—Ä—ã–ª –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é?</textarea>
                        <input type="text" class="answer-input" id="a1_3" value="–ù—å—é—Ç–æ–Ω">
                    </td>
                    <td>
                        <textarea class="question-input" id="q1_4">–•–∏–º–∏—á–µ—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç Au?</textarea>
                        <input type="text" class="answer-input" id="a1_4" value="–ó–æ–ª–æ—Ç–æ">
                    </td>
                </tr>
                
                <!-- –¢–µ–º–∞ 3 -->
                <tr>
                    <td class="topic-cell">
                        <input type="text" class="topic-input" id="topic2" value="–ò—Å–∫—É—Å—Å—Ç–≤–æ">
                    </td>
                    <td>
                        <textarea class="question-input" id="q2_0">–ê–≤—Ç–æ—Ä "–ß—ë—Ä–Ω–æ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç–∞"?</textarea>
                        <input type="text" class="answer-input" id="a2_0" value="–ú–∞–ª–µ–≤–∏—á">
                    </td>
                    <td>
                        <textarea class="question-input" id="q2_1">–ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä "–õ—É–Ω–Ω–æ–π —Å–æ–Ω–∞—Ç—ã"?</textarea>
                        <input type="text" class="answer-input" id="a2_1" value="–ë–µ—Ç—Ö–æ–≤–µ–Ω">
                    </td>
                    <td>
                        <textarea class="question-input" id="q2_2">–ì–æ—Ä–æ–¥ –º—É–∑–µ—è –õ—É–≤—Ä?</textarea>
                        <input type="text" class="answer-input" id="a2_2" value="–ü–∞—Ä–∏–∂">
                    </td>
                    <td>
                        <textarea class="question-input" id="q2_3">–ê–≤—Ç–æ—Ä "–í–æ–π–Ω—ã –∏ –º–∏—Ä–∞"?</textarea>
                        <input type="text" class="answer-input" id="a2_3" value="–¢–æ–ª—Å—Ç–æ–π">
                    </td>
                    <td>
                        <textarea class="question-input" id="q2_4">–•—É–¥–æ–∂–Ω–∏–∫, –æ—Ç—Ä–µ–∑–∞–≤—à–∏–π —É—Ö–æ?</textarea>
                        <input type="text" class="answer-input" id="a2_4" value="–í–∞–Ω –ì–æ–≥">
                    </td>
                </tr>
                
                <!-- –¢–µ–º–∞ 4 -->
                <tr>
                    <td class="topic-cell">
                        <input type="text" class="topic-input" id="topic3" value="–°–ø–æ—Ä—Ç">
                    </td>
                    <td>
                        <textarea class="question-input" id="q3_0">–ò–≥—Ä–æ–∫–æ–≤ –≤ —Ñ—É—Ç–±–æ–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ?</textarea>
                        <input type="text" class="answer-input" id="a3_0" value="11">
                    </td>
                    <td>
                        <textarea class="question-input" id="q3_1">–°–ø–æ—Ä—Ç —Å —à–∞–π–±–æ–π?</textarea>
                        <input type="text" class="answer-input" id="a3_1" value="–•–æ–∫–∫–µ–π">
                    </td>
                    <td>
                        <textarea class="question-input" id="q3_2">–ö–æ–ª–µ—Ü –Ω–∞ –æ–ª–∏–º–ø–∏–π—Å–∫–æ–º —Ñ–ª–∞–≥–µ?</textarea>
                        <input type="text" class="answer-input" id="a3_2" value="5">
                    </td>
                    <td>
                        <textarea class="question-input" id="q3_3">–õ—É—á—à–∏–π —Ç–µ–Ω–Ω–∏—Å–∏—Å—Ç –ø–æ —à–ª–µ–º–∞–º?</textarea>
                        <input type="text" class="answer-input" id="a3_3" value="–î–∂–æ–∫–æ–≤–∏—á">
                    </td>
                    <td>
                        <textarea class="question-input" id="q3_4">–ì–æ–¥ –û–ª–∏–º–ø–∏–∞–¥—ã –≤ –ú–æ—Å–∫–≤–µ?</textarea>
                        <input type="text" class="answer-input" id="a3_4" value="1980">
                    </td>
                </tr>
                
                <!-- –¢–µ–º–∞ 5 -->
                <tr>
                    <td class="topic-cell">
                        <input type="text" class="topic-input" id="topic4" value="–ì–µ–æ–≥—Ä–∞—Ñ–∏—è">
                    </td>
                    <td>
                        <textarea class="question-input" id="q4_0">–°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è —Ä–µ–∫–∞?</textarea>
                        <input type="text" class="answer-input" id="a4_0" value="–ù–∏–ª">
                    </td>
                    <td>
                        <textarea class="question-input" id="q4_1">–°—Ç–æ–ª–∏—Ü–∞ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏?</textarea>
                        <input type="text" class="answer-input" id="a4_1" value="–ö–∞–Ω–±–µ—Ä—Ä–∞">
                    </td>
                    <td>
                        <textarea class="question-input" id="q4_2">–°–∞–º–∞—è –±–æ–ª—å—à–∞—è –ø—É—Å—Ç—ã–Ω—è?</textarea>
                        <input type="text" class="answer-input" id="a4_2" value="–°–∞—Ö–∞—Ä–∞">
                    </td>
                    <td>
                        <textarea class="question-input" id="q4_3">–ß–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –≤ –†–æ—Å—Å–∏–∏?</textarea>
                        <input type="text" class="answer-input" id="a4_3" value="11">
                    </td>
                    <td>
                        <textarea class="question-input" id="q4_4">–°–∞–º–æ–µ –≥–ª—É–±–æ–∫–æ–µ –æ–∑–µ—Ä–æ?</textarea>
                        <input type="text" class="answer-input" id="a4_4" value="–ë–∞–π–∫–∞–ª">
                    </td>
                </tr>
            </table>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="startGame()">üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                <button class="btn btn-danger" onclick="resetGame()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
                <button class="btn btn-secondary" onclick="loadSampleData()">üìù –ü—Ä–∏–º–µ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤</button>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
        <div class="panel" id="gameBoard" style="display: none;">
            <div class="game-header">
                <button class="btn btn-dark" onclick="backToEditor()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä</button>
                <div class="timer" id="timer">30</div>
            </div>

            <div class="score-board">
                <div class="team-score">
                    <div>–ö–æ–º–∞–Ω–¥–∞ 1</div>
                    <input type="number" id="score1" value="0" min="0">
                </div>
                <div class="team-score">
                    <div>–ö–æ–º–∞–Ω–¥–∞ 2</div>
                    <input type="number" id="score2" value="0" min="0">
                </div>
                <div class="team-score">
                    <div>–ö–æ–º–∞–Ω–¥–∞ 3</div>
                    <input type="number" id="score3" value="0" min="0">
                </div>
            </div>

            <table class="game-table" id="gameTable">
                <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
            </table>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
        <div class="modal" id="questionModal">
            <div class="modal-content">
                <div class="question-display" id="modalQuestion"></div>
                <div class="answer-display" id="modalAnswer"></div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showAnswer()">üì¢ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button>
                    <button class="btn btn-danger" onclick="closeQuestion()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ü—Ä–æ—Å—Ç—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let usedQuestions = new Set();
        let timerInterval = null;

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        function saveGameData() {
            const gameData = {
                points: [],
                topics: [],
                questions: {},
                scores: {
                    score1: document.getElementById('score1').value,
                    score2: document.getElementById('score2').value,
                    score3: document.getElementById('score3').value
                },
                usedQuestions: Array.from(usedQuestions)
            };

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –±–∞–ª–ª—ã
            for (let i = 0; i < 5; i++) {
                gameData.points.push(document.getElementById('points' + i).value);
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–º—ã
            for (let i = 0; i < 5; i++) {
                gameData.topics.push(document.getElementById('topic' + i).value);
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
            for (let topicIndex = 0; topicIndex < 5; topicIndex++) {
                for (let pointsIndex = 0; pointsIndex < 5; pointsIndex++) {
                    const questionId = topicIndex + '_' + pointsIndex;
                    gameData.questions[questionId] = {
                        question: document.getElementById('q' + questionId).value,
                        answer: document.getElementById('a' + questionId).value
                    };
                }
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('svoyaIgraData', JSON.stringify(gameData));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showSaveNotification();
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        function loadGameData() {
            const savedData = localStorage.getItem('svoyaIgraData');
            if (savedData) {
                const gameData = JSON.parse(savedData);
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–ª–ª—ã
                if (gameData.points) {
                    for (let i = 0; i < 5; i++) {
                        if (document.getElementById('points' + i)) {
                            document.getElementById('points' + i).value = gameData.points[i] || (i + 1) * 100;
                        }
                    }
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–º—ã
                if (gameData.topics) {
                    for (let i = 0; i < 5; i++) {
                        if (document.getElementById('topic' + i)) {
                            document.getElementById('topic' + i).value = gameData.topics[i] || '–¢–µ–º–∞ ' + (i + 1);
                        }
                    }
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
                if (gameData.questions) {
                    for (let topicIndex = 0; topicIndex < 5; topicIndex++) {
                        for (let pointsIndex = 0; pointsIndex < 5; pointsIndex++) {
                            const questionId = topicIndex + '_' + pointsIndex;
                            if (gameData.questions[questionId]) {
                                if (document.getElementById('q' + questionId)) {
                                    document.getElementById('q' + questionId).value = gameData.questions[questionId].question;
                                }
                                if (document.getElementById('a' + questionId)) {
                                    document.getElementById('a' + questionId).value = gameData.questions[questionId].answer;
                                }
                            }
                        }
                    }
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—á—ë—Ç
                if (gameData.scores) {
                    document.getElementById('score1').value = gameData.scores.score1 || 0;
                    document.getElementById('score2').value = gameData.scores.score2 || 0;
                    document.getElementById('score3').value = gameData.scores.score3 || 0;
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
                if (gameData.usedQuestions) {
                    usedQuestions = new Set(gameData.usedQuestions);
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
        function showSaveNotification() {
            const notification = document.getElementById('saveNotification');
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª–µ–π
        function setupAutoSave() {
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', saveGameData);
            });
        }

        // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
        function startGame() {
            saveGameData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–≥—Ä—ã
            document.getElementById('editorPanel').style.display = 'none';
            document.getElementById('gameBoard').style.display = 'block';
            createGameBoard();
        }

        function backToEditor() {
            saveGameData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
            document.getElementById('gameBoard').style.display = 'none';
            document.getElementById('editorPanel').style.display = 'block';
            stopTimer();
        }

        function createGameBoard() {
            const table = document.getElementById('gameTable');
            table.innerHTML = '';

            // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –±–∞–ª–ª–∞–º–∏
            const headerRow = document.createElement('tr');
            headerRow.appendChild(createHeaderCell(''));
            for (let i = 0; i < 5; i++) {
                const points = document.getElementById('points' + i).value;
                headerRow.appendChild(createHeaderCell(points));
            }
            table.appendChild(headerRow);

            // –°—Ç—Ä–æ–∫–∏ —Å —Ç–µ–º–∞–º–∏ –∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
            for (let topicIndex = 0; topicIndex < 5; topicIndex++) {
                const row = document.createElement('tr');
                const topicName = document.getElementById('topic' + topicIndex).value;
                row.appendChild(createHeaderCell(topicName));

                for (let pointsIndex = 0; pointsIndex < 5; pointsIndex++) {
                    const questionId = topicIndex + '_' + pointsIndex;
                    const points = document.getElementById('points' + pointsIndex).value;
                    const cell = createQuestionCell(points, questionId);
                    row.appendChild(cell);
                }
                table.appendChild(row);
            }
        }

        function createHeaderCell(text) {
            const cell = document.createElement('td');
            cell.className = 'category-header';
            cell.textContent = text;
            return cell;
        }

        function createQuestionCell(points, questionId) {
            const cell = document.createElement('td');
            cell.className = usedQuestions.has(questionId) ? 'question-cell used' : 'question-cell';
            cell.textContent = points;
            cell.onclick = function() {
                if (!usedQuestions.has(questionId)) {
                    openQuestion(questionId);
                }
            };
            return cell;
        }

        function openQuestion(questionId) {
            usedQuestions.add(questionId);
            saveGameData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–æ–ø—Ä–æ—Å–∞
            
            const [topicIndex, pointsIndex] = questionId.split('_');
            const question = document.getElementById('q' + questionId).value;
            const answer = document.getElementById('a' + questionId).value;
            const points = document.getElementById('points' + pointsIndex).value;
            const topic = document.getElementById('topic' + topicIndex).value;

            document.getElementById('modalQuestion').innerHTML = 
                topic + ': ' + question + ' <span class="points-badge">' + points + '</span>';
            document.getElementById('modalAnswer').textContent = answer;
            document.getElementById('modalAnswer').style.display = 'none';
            document.getElementById('questionModal').style.display = 'block';

            startTimer(30);
        }

        function startTimer(seconds) {
            const timer = document.getElementById('timer');
            let timeLeft = seconds;
            
            timerInterval = setInterval(function() {
                timeLeft--;
                timer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    stopTimer();
                    showAnswer();
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function showAnswer() {
            document.getElementById('modalAnswer').style.display = 'block';
        }

        function closeQuestion() {
            document.getElementById('questionModal').style.display = 'none';
            createGameBoard();
            stopTimer();
        }

        function resetGame() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!')) {
                usedQuestions.clear();
                
                // –°–±—Ä–æ—Å —Å—á–µ—Ç–æ–≤
                document.getElementById('score1').value = 0;
                document.getElementById('score2').value = 0;
                document.getElementById('score3').value = 0;
                
                // –°–±—Ä–æ—Å –±–∞–ª–ª–æ–≤
                for (let i = 0; i < 5; i++) {
                    document.getElementById('points' + i).value = (i + 1) * 100;
                }
                
                // –°–±—Ä–æ—Å —Ç–µ–º
                const topics = ['–ò—Å—Ç–æ—Ä–∏—è', '–ù–∞—É–∫–∞', '–ò—Å–∫—É—Å—Å—Ç–≤–æ', '–°–ø–æ—Ä—Ç', '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è'];
                for (let i = 0; i < 5; i++) {
                    document.getElementById('topic' + i).value = topics[i];
                }
                
                // –°–±—Ä–æ—Å –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
                const questions = document.querySelectorAll('.question-input, .answer-input');
                questions.forEach(input => input.value = '');
                
                // –£–¥–∞–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                localStorage.removeItem('svoyaIgraData');
                
                alert('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–æ—à–µ–Ω—ã!');
            }
        }

        function loadSampleData() {
            // –£–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            alert('–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã! –ò–∑–º–µ–Ω–∏—Ç–µ –∏—Ö –ø–æ–¥ —Å–µ–±—è –∏ –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.');
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
        document.getElementById('questionModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeQuestion();
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', function() {
            loadGameData(); // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            setupAutoSave(); // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        });

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', saveGameData);
    </script>
</body>
</html>